machine:
  node:
    version: 0.12
  timezone:
    America/New_York

  environment:
    appname: tesla

  hosts:
    dev-tesla.reisys.com:  127.0.0.1
    uat-tesla.reisys.com:  127.0.0.1
    tesla.reisys.com:      127.0.0.1

  services:
    - elasticsearch
    - mongodb

general:  
  artifacts:
    - artifacts/testing

dependencies:
  pre:
  - npm install -g bower grunt-cli
  - gem install sass
  - gem install compass


deployment:
  production:
    branch: master
    commands:
      - grunt clean coffee package publish:"$CIRCLE_BRANCH"
         
  staging:
    branch: develop
    commands:
      - grunt clean coffee package publish:"$CIRCLE_BRANCH"

test:
   override:
      - ./application/run-tests2.sh