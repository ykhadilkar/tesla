machine:
  node:
    version: 0.12
  timezone:
    America/New_York

  environment:
    appname: tesla

  hosts:
    dev-tesla.reisys.com:  127.0.0.1
    uat-tesla.reisys.com:  127.0.0.1
    tesla.reisys.com:      127.0.0.1

  services:
    - elasticsearch
    - mongodb
    - docker

general:  
  artifacts:
    - artifacts/testing

dependencies:
  pre:
  - npm install -g bower grunt-cli
  - gem install sass
  - gem install compass

test:
   override:
      - sh ./application/run-tests.sh

deployment:
  tutum:
    branch: develop
    commands:
      - docker login -e $TUTUM_EMAIL -u $TUTUM_USER -p $TUTUM_PASS tutum.co
      - docker build -t $TUTUM_USER/application_backend ./application/backend
      - docker tag application_backend tutum.co/$TUTUM_USER/application_backend
      - docker push tutum.co/$TUTUM_USER/application_backend
